{
  "swagger": "2.0",
  "info": {
    "description": "lenbo-api",
    "version": "1.0.0",
    "title": "lenbo API document",
    "termsOfService": "http://swagger.io/terms/",
    "contact": {
      "email": "apiteam@swagger.io"
    },
    "license": {
      "name": "Apache 2.0",
      "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
    }
  },
  "host": "petstore.swagger.io",
  "basePath": "/v2",
  "tags": [
    {
      "name": "User"
    },
    {
      "name": "Item",
      "description": "Transactionのアイテム情報"
    },
    {
      "name": "Transaction"
    },
    {
      "name": "Qr",
      "description": "貸し借り登録用のQR"
    },
    {
      "name": "FcmToken",
      "description": "ユーザーに紐づく端末ID"
    },
    {
      "name": "Message"
    },
    {
      "name": "Relationship",
      "description": "友達関係"
    }
  ],
  "schemes": [
    "https",
    "http"
  ],
  "paths": {
    "/api/v1/users": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "ユーザーの一覧取得",
        "description": "",
        "operationId": "getUsers",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "name": "token",
            "type": "string",
            "description": "firebase token"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/User"
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "User"
        ],
        "summary": "ユーザー新規作成",
        "description": "",
        "operationId": "createUser",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "name": "token",
            "type": "string",
            "description": "firebase token"
          },
          {
            "in": "body",
            "name": "body",
            "schema": {
              "properties": {
                "profile_img": {
                  "type": "string",
                  "example": "http://~~~~"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "integer",
                  "format": "int64"
                },
                "name": {
                  "type": "string"
                },
                "profile_img": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "User"
        ],
        "summary": "ユーザーの検索用の名前の変更",
        "description": "",
        "operationId": "editUser",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "name": "token",
            "type": "string",
            "description": "firebase token"
          },
          {
            "in": "body",
            "name": "body",
            "schema": {
              "properties": {
                "search_name": {
                  "type": "string",
                  "example": "kobasato34"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "integer",
                  "format": "int64"
                },
                "name": {
                  "example": "kobasato34"
                },
                "profile_img": {
                  "example": "http://~~"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/user_info": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "マイページのユーザー情報取得",
        "operationId": "getUserInfo",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "name": "token",
            "type": "string",
            "description": "firebase token"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string"
                },
                "profile_img": {
                  "type": "string"
                },
                "lent_num": {
                  "type": "integer"
                },
                "borrow_num": {
                  "type": "integer"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/items": {
      "get": {
        "tags": [
          "Item"
        ],
        "summary": "アイテムの一覧取得",
        "operationId": "getItems",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "name": "token",
            "type": "string",
            "description": "firebase token"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Item"
              }
            }
          }
        }
      }
    },
    "/api/v1/items/:id": {
      "get": {
        "tags": [
          "Item"
        ],
        "summary": "アイテムの取得",
        "operationId": "getItem",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "name": "token",
            "type": "string",
            "description": "firebase token"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Item"
              }
            }
          }
        }
      }
    },
    "/api/v1/transactions": {
      "get": {
        "tags": [
          "Transaction"
        ],
        "summary": "取引の一覧取得",
        "description": "",
        "operationId": "getTransactions",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "name": "token",
            "type": "string",
            "description": "firebase token"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Transaction"
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Transaction"
        ],
        "summary": "取引の作成",
        "description": "",
        "operationId": "createTransaction",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "name": "token",
            "type": "string",
            "description": "firebase token"
          },
          {
            "in": "body",
            "name": "body",
            "schema": {
              "properties": {
                "name": {
                  "type": "string",
                  "example": "itemname"
                },
                "item_img": {
                  "type": "string",
                  "example": "http://~~~~"
                },
                "qr_hash": {
                  "type": "string",
                  "example": "dakjfdlkajgldkajgldka"
                },
                "deadline": {
                  "type": "string",
                  "example": "2018-01-01"
                },
                "description": {
                  "type": "string",
                  "example": "よろ"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "integer"
                },
                "name": {
                  "example": "item name"
                },
                "item_img": {
                  "example": "http://~~"
                },
                "user_id": {
                  "type": "integer"
                },
                "deadline": {
                  "example": "2018-01-01"
                },
                "description": {
                  "example": "よろしく"
                },
                "status": {
                  "type": "integer"
                },
                "lender_id": {
                  "type": "integer"
                },
                "lender_name": {
                  "example": "kobasato"
                },
                "lender_profile_img": {
                  "example": "http://~~"
                },
                "borrower_id": {
                  "type": "integer"
                },
                "borrower_name": {
                  "example": "yaya"
                },
                "borrower_profile_img": {
                  "example": "http://~~"
                },
                "created_at": {
                  "example": "2018-01-01"
                },
                "updated_at": {
                  "example": "2018-01-01"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Transaction"
        ],
        "summary": "取引の編集",
        "description": "",
        "operationId": "updateTransaction",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "name": "token",
            "type": "string",
            "description": "firebase token"
          },
          {
            "in": "body",
            "name": "body",
            "schema": {
              "properties": {
                "name": {
                  "type": "string",
                  "example": "itemname"
                },
                "item_img": {
                  "type": "string",
                  "example": "http://~~"
                },
                "qr_hash": {
                  "type": "string",
                  "example": "dakjfdlkajgldkajgldka"
                },
                "deadline": {
                  "type": "string",
                  "example": "2018-01-01"
                },
                "description": {
                  "type": "string",
                  "example": "よろ"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "integer"
                },
                "name": {
                  "example": "item name"
                },
                "item_img": {
                  "example": "http://~~"
                },
                "user_id": {
                  "type": "integer"
                },
                "deadline": {
                  "example": "2018-01-01"
                },
                "description": {
                  "example": "よろしく"
                },
                "status": {
                  "type": "integer"
                },
                "lender_id": {
                  "type": "integer"
                },
                "lender_name": {
                  "example": "kobasato"
                },
                "lender_profile_img": {
                  "example": "http://~~"
                },
                "borrower_id": {
                  "type": "integer"
                },
                "borrower_name": {
                  "example": "yaya"
                },
                "borrower_profile_img": {
                  "example": "http://~~"
                },
                "created_at": {
                  "example": "2018-01-01"
                },
                "updated_at": {
                  "example": "2018-01-01"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transaction_status/:id": {
      "patch": {
        "tags": [
          "Transaction"
        ],
        "summary": "取引のstatus編集",
        "description": "",
        "operationId": "updateTransactionStatus",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "name": "token",
            "type": "string",
            "description": "firebase token"
          },
          {
            "in": "body",
            "name": "body",
            "schema": {
              "properties": {
                "status": {
                  "type": "integer"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "update": {
                  "example": true
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transactions/:id": {
      "get": {
        "tags": [
          "Transaction"
        ],
        "summary": "取引の取得",
        "description": "",
        "operationId": "getTransaction",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "name": "token",
            "type": "string",
            "description": "firebase token"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "integer"
                },
                "name": {
                  "example": "item name"
                },
                "item_img": {
                  "example": "http://~~"
                },
                "user_id": {
                  "type": "integer"
                },
                "deadline": {
                  "example": "2018-01-01"
                },
                "description": {
                  "example": "よろしく"
                },
                "status": {
                  "type": "integer"
                },
                "lender_id": {
                  "type": "integer"
                },
                "lender_name": {
                  "example": "kobasato"
                },
                "lender_profile_img": {
                  "example": "http://~~"
                },
                "borrower_id": {
                  "type": "integer"
                },
                "borrower_name": {
                  "example": "yaya"
                },
                "borrower_profile_img": {
                  "example": "http://~~"
                },
                "created_at": {
                  "example": "2018-01-01"
                },
                "updated_at": {
                  "example": "2018-01-01"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/lender_transactions": {
      "get": {
        "tags": [
          "Transaction"
        ],
        "summary": "貸している取引の取得",
        "description": "",
        "operationId": "getLenderTransaction",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "name": "token",
            "type": "string",
            "description": "firebase token"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "integer"
                },
                "name": {
                  "example": "item name"
                },
                "item_img": {
                  "example": "http://~~"
                },
                "lender_user_name": {
                  "example": "kobasato"
                },
                "lender_user_profile_img": {
                  "example": "http://~~"
                },
                "borrower_user_name": {
                  "example": "yaya"
                },
                "borrower_user_profile_img": {
                  "example": "http://~~"
                },
                "message_num": {
                  "example": "1"
                },
                "fire_budge": {
                  "type": "boolean"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/borrower_transactions": {
      "get": {
        "tags": [
          "Transaction"
        ],
        "summary": "借りている取引の取得",
        "description": "",
        "operationId": "getBorrowerTransaction",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "name": "token",
            "type": "string",
            "description": "firebase token"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "integer"
                },
                "name": {
                  "example": "item name"
                },
                "item_img": {
                  "example": "http://~~"
                },
                "lender_user_name": {
                  "example": "kobasato"
                },
                "lender_user_profile_img": {
                  "example": "http://~~"
                },
                "borrower_user_name": {
                  "example": "yaya"
                },
                "borrower_user_profile_img": {
                  "example": "http://~~"
                },
                "message_num": {
                  "example": "1"
                },
                "fire_budge": {
                  "type": "boolean"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/qrs": {
      "post": {
        "tags": [
          "Qr"
        ],
        "summary": "貸し借り登録のQR",
        "description": "",
        "operationId": "createQR",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "name": "token",
            "type": "string",
            "description": "firebase token"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "qr_hash": {
                  "example": "idffadkljfadlk"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/fcm_token": {
      "post": {
        "tags": [
          "FcmToken"
        ],
        "summary": "プッシュ通知用の端末ID",
        "description": "",
        "operationId": "createFcmToken",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "name": "token",
            "type": "string",
            "description": "firebase token"
          },
          {
            "in": "body",
            "name": "body",
            "schema": {
              "properties": {
                "fcm_token": {
                  "example": "ifdafjdkalsjflakj"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "create": {
                  "type": "boolean"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/message": {
      "post": {
        "tags": [
          "Message"
        ],
        "summary": "Transactionのメッセージの作成",
        "description": "",
        "operationId": "createMessage",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "name": "token",
            "type": "string",
            "description": "firebase token"
          },
          {
            "in": "body",
            "name": "body",
            "schema": {
              "properties": {
                "transaction_id": {
                  "example": 0
                },
                "message": {
                  "example": "返してね"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Message"
              }
            }
          }
        }
      }
    },
    "/api/v1/message/:id": {
      "get": {
        "tags": [
          "Message"
        ],
        "summary": "Transactionのメッセージの取得",
        "description": "",
        "operationId": "getMessage",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "name": "token",
            "type": "string",
            "description": "firebase token"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Message"
              }
            }
          }
        }
      }
    }
  },
  "securityDefinitions": {
    "petstore_auth": {
      "type": "oauth2",
      "authorizationUrl": "http://petstore.swagger.io/oauth/dialog",
      "flow": "implicit",
      "scopes": {
        "write:pets": "modify pets in your account",
        "read:pets": "read your pets"
      }
    },
    "api_key": {
      "type": "apiKey",
      "name": "api_key",
      "in": "header"
    }
  },
  "definitions": {
    "Relationship": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64"
        },
        "from_user_id": {
          "type": "integer",
          "description": "Userモデルに紐づく"
        },
        "to_user_id": {
          "type": "integer",
          "description": "Userモデルに紐づく"
        },
        "relationship_status": {
          "type": "boolean",
          "description": "false: 非承認, true: 承認"
        },
        "created_at": {
          "type": "string"
        },
        "updated_at": {
          "type": "string"
        }
      },
      "xml": {
        "name": "Relationship"
      }
    },
    "Manager": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64"
        },
        "email": {
          "type": "string"
        },
        "password": {
          "type": "string"
        },
        "password_confirmation": {
          "type": "string"
        },
        "admin_flg": {
          "type": "boolean"
        },
        "created_at": {
          "type": "string"
        },
        "updated_at": {
          "type": "string"
        }
      },
      "xml": {
        "name": "Manager"
      }
    },
    "User": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64"
        },
        "name": {
          "type": "string"
        },
        "profile_img": {
          "type": "string"
        },
        "uid": {
          "type": "string",
          "description": "firebaseから取得できるID"
        },
        "admin": {
          "type": "boolean"
        },
        "search_name": {
          "type": "string",
          "description": "友達検索用"
        },
        "created_at": {
          "type": "string"
        },
        "updated_at": {
          "type": "string"
        }
      },
      "xml": {
        "name": "User"
      }
    },
    "Item": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64"
        },
        "name": {
          "type": "string"
        },
        "item_img": {
          "type": "string"
        },
        "user_id": {
          "type": "integer",
          "description": "Userモデルに紐づく"
        },
        "created_at": {
          "type": "string"
        },
        "updated_at": {
          "type": "string"
        }
      },
      "xml": {
        "name": "Item"
      }
    },
    "Qr": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64"
        },
        "qr_hash": {
          "type": "string"
        },
        "user_id": {
          "type": "integer"
        },
        "created_at": {
          "type": "string"
        },
        "updated_at": {
          "type": "string"
        }
      },
      "xml": {
        "name": "Qr"
      }
    },
    "Message": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64"
        },
        "transaction_id": {
          "type": "integer",
          "description": "transactionモデルに紐づく"
        },
        "user_id": {
          "type": "integer"
        },
        "message": {
          "type": "string"
        },
        "admin": {
          "type": "boolean"
        },
        "created_at": {
          "type": "string"
        },
        "updated_at": {
          "type": "string"
        }
      },
      "xml": {
        "name": "Message"
      }
    },
    "FcmToken": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64"
        },
        "fcm_token": {
          "type": "string"
        },
        "user_id": {
          "type": "integer",
          "format": "int64"
        }
      },
      "xml": {
        "name": "FcmToken"
      }
    },
    "Transaction": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64"
        },
        "deadline": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "status": {
          "type": "integer",
          "description": "1: 取引中 2: 予約中 3: 取引完了"
        },
        "item": {
          "$ref": "#/definitions/Item"
        },
        "lender_id": {
          "type": "integer",
          "description": "Userモデルに紐づく貸し手のid"
        },
        "borrower_id": {
          "type": "integer",
          "description": "Userモデルに紐づく借り手のid"
        },
        "created_at": {
          "type": "string"
        },
        "updated_at": {
          "type": "string"
        }
      },
      "xml": {
        "name": "Transaction"
      }
    }
  },
  "externalDocs": {
    "description": "Find out more about Swagger",
    "url": "http://swagger.io"
  }
}